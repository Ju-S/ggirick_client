<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Vacation">

    <!-- 휴가 사용 기록 등록 -->
    <insert id="insertVacationUsageLog">
        INSERT INTO vacation_usage_log (
        usage_id, employee_id, approval_id, grant_id,
        start_date, end_date, days_used, vacation_type, used_date, created_at
        ) VALUES (
        vacation_usage_log_seq.NEXTVAL,
        #{employeeId},
        #{approvalId},
        #{grantId},
        #{startDate},
        #{endDate},
        #{daysUsed},
        #{vacationType},
        SYSDATE,
        SYSDATE
        )
    </insert>

    <!-- 미사용 휴가 알림 로그 등록 -->
    <insert id="insertVacationNotification">
        INSERT INTO vacation_notification_log (
        id, employee_id, grant_id, notice_type, sent_date, message, created_at
        ) VALUES (
        vacation_notification_log_seq.NEXTVAL,
        #{employeeId},
        #{grantId},
        #{noticeType},
        SYSDATE,
        #{message},
        SYSDATE
        )
    </insert>

    <!-- 휴가 사용 로그 단건 조회 -->
    <select id="getVacationUsageById" resultType="com.kedu.ggirick_client_backend.dto.hr.VacationUsageLogDTO">
        SELECT *
        FROM vacation_usage_log
        WHERE usage_id = #{usageId}
    </select>

    <!-- 휴가 사용 로그 삭제 -->
    <delete id="deleteVacationUsage">
        DELETE FROM vacation_usage_log
        WHERE usage_id = #{usageId}
    </delete>
</mapper>
